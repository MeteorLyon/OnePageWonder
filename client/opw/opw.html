<!-- #OnePageWonder v1.0.0-RC.2 by @iDoMeteor -->
<!-- Operational templates                    -->



<body>
    {{!-- TODO: It would be nice to serve up a cached static
                version of the site, automatically removing forms --}}
    <noscript>
        Our site relies on cutting edge Javascript technology,
        please enable it now or visit us again using a modern
        graphical browser.  Thank you for your understanding.
    </noscript>
</body>



<template name="opwAlert">

    <div 
        class="alert alert-{{type}} alert-dismissible fade in" 
        role="alert">

        <button 
            type="button" 
            class="close" 
            data-dismiss="alert" 
            aria-label="Close">
            <span 
                aria-hidden="true">
                Ã—
            </span>
        </button>
        {{{content}}}

    </div>

</template>



<template name="opwAuthenticate">

    <section 
        id="opw-login-section" 
        class="row block-center opw-lightbox-content">
        <div 
            class="col-sm-12 col-md-8 col-lg-6 text-center">

            <img 
                src="/opw/images/onepagewonder-logo.png" 
                alt="#OnePageWonder by @iDoMeteor" />
            <h3>Authenticate Yourself</h3>
            <p>Present your credentials for inspection.</p>
            <form id="opw-auth-email-form">
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input 
                        id="opw-auth-email" 
                        type="email" 
                        name="email" 
                        class="form-control" 
                        placeholder="Email address">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input 
                        id="opw-auth-password" 
                        type="password" 
                        name="password" 
                        class="form-control" 
                        placeholder="Password">
                </div>
                <div class="btn-group">
                    {{#if Template.subscriptionsReady}}
                        {{#if showLogin}}
                            <button 
                                id="opw-auth-email-login" 
                                type="button" 
                                class="btn btn-info">
                                Authenticate
                            </button>
                        {{else}}
                            <button 
                                id="opw-auth-email-create" 
                                type="button" 
                                class="btn btn-info">
                                Create Account
                            </button>
                        {{/if}}
                        <button 
                            id="opw-auth-cancel" 
                            type="button" 
                            class="btn btn-danger">
                            Cancel
                        </button>
                    {{else}}
                        <button 
                            id="opw-auth-cancel" 
                            type="button" 
                            class="btn btn-danger">
                            <i class="fa fa-spinner fa-spin"></i>
                            Loading..
                        </button>
                    {{/if}}

                </div>
            </form>

            {{!-- *cough* --}}
            <h5>Your IP: {{currentIp}}</h5>

        </div>
    </section>

</template>



<template name="opwContactForm">

    <form class="form-inline opw-contact-form">
        <div class="form-group">
            <label 
                class="sr-only" 
                for="opw-contact-input">
                Twitter or Email
            </label>
            <div class="input-group">
                <div class="input-group-addon">
                    <i class="fa 
                        fa-flag-o 
                        opw-contact-flag 
                        text-muted"></i>
                </div>
                <input 
                    type="text" 
                    class="form-control opw-contact-input" 
                    placeholder="@Twitter or e@mail.com required">
            </div>
        </div>
        <button 
            type="submit" 
            class="btn btn-primary opw-contact-submit">
            {{contactButtonString}}
        </button>
    </form>

</template>



<template name="opwContactModal">

    <p>TODO</p>

</template>



<template name="opwContactThankYou">

    <form class="opw-contact-form form-inline">
        <div class="form-group text-center">
            <label>
                {{contactThankYou1}}
            </label>
            <div class="input-group">
                <p>
                    {{contactThankYou2}}
                </p>
            </div>
        </div>
    </form>

</template>



<template name="opwEditor">

    <div class="row">
        <div 
            id="opw-editor-title" 
            class="col-sm-12 text-center">
            <input 
                type="text" 
                id="opw-title-editor"
                class="form-control" 
                maxlength="25"
                placeholder="{{opwEditorTitlePlaceholder}}"
                >
        </div>
        <div 
            id="opw-editor-sort-order" 
            class="col-sm-12 text-center">
            <select 
                type="text" 
                id="opw-sort-order-editor"
                class="form-control" 
                maxlength="25"
                placeholder="{{opwEditorTitlePlaceholder}}"
                >
                {{!-- TODO --}}
                <option value="alpha">Alphabetical</option>
                <option value="chron">Chronological</option>
                <option value="rev">Reverse Chron</option>
                {{#each opwRowSortRange}}
                    <option value="XXX">XXX</option>
                {{/each}}
            </select>
        </div>
        <div 
            id="opw-element-bar" 
            class="col-sm-12 text-center">
            {{>opwWonderBar}}
        </div>
        <div 
            id="opw-editor-content" 
            class="col-sm-12 block-center">
            {{>opwEditorTextarea}}
        </div>
    </div>

</template>



<template name="opwEditorContentExample">
<div class="col-lg-12">
  <h1>New Section</h1>
  <h2>Tagline for new section</h2>
  <ul>
    <li>To save: Press control + enter</li>
    <li>Contact form: Cick the toolbar envelope</li>
    <li>For now, button clicks append to the end of the textarea 
        and not at cursor position</li>
  </ul>
  <p>That's it!</p>
</div>
</template>



<template name="opwEditorTextarea">
{{!-- It must be done, uses opwEditorContentExample (above) --}}
<textarea id="opw-editor-textarea" class="form-control">{{#if rowContent}}{{{rowContent}}}{{else}}{{>opwEditorContentExample}}{{/if}}</textarea>
{{!-- Ugh! lol --}}
</template>



<template name="opwFooter">

<footer id="opw-{{#if opwFixedFooter}}fixed{{else}}static{{/if}}-footer" class="row bg-primary">

        {{!-- Social icons --}}
        <div class="col-sm-4 text-center">
            {{#if opwShowSocialIcons}}
                {{> opwSocialIcons}}
            {{/if}}
        </div>

        <div class="col-sm-4 text-center">

            {{!-- Fixed scroll indicator --}}
            {{#if opwFixedScrollIndicator}}
                {{> opwScrollIndicator}}
            {{/if}}

        </div>

        <div class="col-sm-4 text-center">

            {{!-- One Page Wonder info --}}
            <a id="opw-site-stats" 
                class="float-right img-rounded">
                <i class="fa fa-2x fa-bar-graph"></i>
            </a>
            <a id="opw-brag" 
                class="float-right img-rounded">
                <img src="/opw/images/onepagewonder-logo-24-dark.png" 
                    title="One Page Wonder" id="opw-logo"/>
            </a>

        </div>

    </footer>

</template>



<template name="opwHelp">

    <section id="opw-help" class="row opw-lightbox-content">
    </section>


</template>



<template name="opwLayout">

    {{!-- TODO: Use IR better --}}
    {{> opwNavigation}}
    {{> yield}}
    {{#if showFooter}}
        {{> opwFooter}}
    {{/if}}

</template>



<template name="opwLightbox">

    {{!-- Re-factor Editor & others to use this --}}
    <div 
        class="modal fade" 
        id="{{cssId}}" 
        tabindex="-1" 
        role="dialog" 
        aria-labelledby="{{cssId}}-label">

        <div 
            class="modal-dialog" 
            role="document">

            <div class="modal-content">

                <div class="modal-header">
                    <button 
                        type="button" 
                        class="close" 
                        data-dismiss="modal" 
                        aria-label="Close">
                        <span 
                            aria-hidden="true">
                            &times;
                        </span>
                    </button>
                    <h4 
                        class="modal-title" 
                        id="opw-editor-label">
                        {{label}}
                    </h4>
                </div>

                <div class="modal-body">
                    <div class="container-fluid">
                        {{#if columns}}
                            <div class="row">
                                {{!-- For consistency w/editor input --}}
                                {{{columns}}}
                            </div>
                        {{/if}}
                        {{#if template}}
                            {{!-- w00t! --}}
                            {{> Template.dynamic template=template}}
                        {{/if}}
                    </div>
                </div>

                <div class="modal-footer">
                    {{#if footerButtons}}
                        {{#if closeText}}
                            <button 
                                type="button" 
                                class="btn btn-default" 
                                data-dismiss="modal">
                                {{closeText}}
                            </button>
                        {{/if}}
                        {{#if actionText}}
                            <button 
                                id="{{actionId}}"
                                type="button" 
                                class="btn btn-primary">
                                {{actionText}}
                            </button>
                        {{/if}}
                    {{/if}}
                </div>

            </div>
        </div>
    </div>

</template>



<template name="opwLoading">

    {{!-- TODO: Get some CSS loaders set up already! lol --}}
    <div id="opw-loading">
        <p>Loading...</p>
    </div>

</template>



<template name="opwNavigation">

    {{!-- Sometimes.. there is just no pretty way to Bootstrap >:| --}}
    <nav id="opw-primary-nav" class="navbar navbar-default navbar-fixed-top">
        <div class="container{{opwFluidNavbar}}">

            {{>opwNavigationMobile}}

            {{!-- TODO: May need to put the classes or div into a helper --}}
            <div id="opw-navigation" class="{{opwCollapseNavbar}}" >
                {{!-- This line is very long because Meteor won't compile if
                        I put the #if on another line :) --}}

                <ul class="{{opwNavbarClasses}}">

                    <li>
                        <a class="page-scroll hide" href="#top">One Page Wonder</a>
                    </li>

                    {{!-- Dynamic rows --}}
                    {{#each opwRows}}

                        {{!-- > opwNavigationItem --}}
                        <li>
                            <a class="page-scroll" href="#{{slug}}">{{title}}</a>
                        </li>

                    {{/each}}

                    {{!-- Change navigation style --}}
                    {{#if opwAllowDynamicNavigation}}
                        <li id="opw-change-navigation">
                            <a>
                                <span class="glyphicon glyphicon-magic"></span>
                            </a>
                        </li>
                    {{/if}}

                    {{!-- Add row --}}
                    {{#if currentUser}}
                        <li id="opw-add-row">
                            <a>
                                <span class="glyphicon glyphicon-plus"></span>
                            </a>
                        </li>
                    {{/if}}

                    {{!-- Authentication --}}
                    {{#if currentUser}}
                        <li id="opw-logout">
                            <a class="opw-auth-icon float-right">
                                <span class="fa fa-sign-out text-danger"></span>
                            </a>
                        </li>
                    {{else}}
                        <li id="opw-login">
                            <a class="opw-auth-icon float-right">
                                <span class="fa fa-sign-in"></span>
                            </a>
                        </li>
                    {{/if}}

                </ul>
            </div>
        </div>
    </nav>

</template>



<template name="opwNavigationItem">

    <li>
        <a class="page-scroll" href="#{{slug}}">{{title}}</a>
    </li>

</template>



<template name="opwNavigationMobile">

    <div class="navbar-header">
        <button 
            type="button" 
            class="navbar-toggle collapsed" 
            data-toggle="collapse" 
            data-target="#opw-navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand page-scroll opw-root">
            <img src="{{opwSiteLogo}}" title="{{opwSiteTitle}}" id="opw-logo" />
            {{opwsiteTitle}}
        </a>
    </div>

</template>



<template name="opwRoot">

    {{#with opwHomeRow}}
        {{>opwSection}}
    {{/with}}

    {{#each opwRows}}
        {{>opwSection}}
    {{/each}}

  {{!--
   This worked fine, by trying waiting on the home row only
    {{>opwAuthenticate}}

    {{#with opwHomeRow}}
        {{>opwSection}}
    {{/with}}

    {{#each opwRows}}
        {{>opwSection}}
    {{/each}}
  --}}

</template>



<template name="opwScrollIndicator">

    {{#if opwShowFixedScrollIndicator}}

        {{#if opwLastDisplayedSectionIsActive}}
            <div>
                <a id="opw-scroll-to-top" class="page-scroll">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle-o fa-stack-2x"
                            style="font-weight: 200"></i>
                        <i class="fa fa-angle-double-up fa-stack-1x"></i>
                    </span>
                </a>
            </div>
        {{else}}
            <div>
                <a id="opw-scroll-to-next" class="page-scroll">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle-o fa-stack-2x"
                            style="font-weight: 200"></i>
                        <i class="fa fa-angle-double-down fa-stack-1x"></i>
                    </span>
                </a>
            </div>
        {{/if}}

    {{/if}}

</template>



<template name="opwSection">

    <section 
        id="{{slug}}" 
        class="row{{#unless title}} root-height{{/unless}}">

        {{#if currentUser}}
            <div class="col-sm-12 opw-row-options text-center text-muted">
                {{> opwSectionOptions}}
            </div>
        {{/if}}

        {{{content}}}

        {{#if opwShowSectionalScrollIndicator}}
            {{>opwScrollIndicator}}
        {{/if}}

    </section>

</template>



<template name="opwSectionOptions">

    <h5 
        class="opw-toggle-row-editor inline"
        title="Edit this row">
        <i 
            class="fa fa-pencil"
            title="Edit this row">
        </i>
    </h5>
    {{#if opwSectionRemovable}}
        <h5 
            class="opw-remove-row inline"
            title="Remove this row">
            <i 
                class="fa fa-trash"
                title="Remove this row">
            </i>
        </h5>
    {{/if}}

</template>



<template name="opwSocialIcons">

    <div id="opw-social" class="float-right">
        {{#each opwSocialServices}}
            <a id="opw-{{service}}" 
                    class="opw-social-icon" 
                    href="{{link}}">
                <span class="fa fa-2x fa-github"></span>
            </a>
        {{/each}}
    </div>

</template>



<template name="opwWonderBar">

    <div class="btn-group z1">

        {{!-- Bootstrap Components --}}
        <button id="opw-wonderbar-button" class="opw-wonderbar-btn btn btn-sm btn-primary">
            Btn
        </button>
        <button id="opw-wonderbar-contact" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-envelope" title="Insert code for OPW contact form"></i>
        </button>
        <div class="dropdown">
            {{!-- Columns --}}
            <button 
                class="btn btn-primary dropdown-toggle" 
                type="button" 
                id="opw-wonderbar-columns" 
                data-toggle="dropdown" 
                aria-haspopup="true" 
                aria-expanded="true">
                Cols
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="opw-wonderbar-columns">
                <li>
                    <button id="opw-wonderbar-col-12" class="opw-wonderbar-btn btn btn-sm btn-primary">
                        Sm12
                    </button>
                </li>
                <li>
                    <button id="opw-wonderbar-col-6" class="opw-wonderbar-btn btn btn-sm btn-primary">
                        Sm6
                    </button>
                </li>
                <li>
                    <button id="opw-wonderbar-col-4" class="opw-wonderbar-btn btn btn-sm btn-primary">
                        Sm4
                    </button>
                </li>
                <li>
                    <button id="opw-wonderbar-col-3" class="opw-wonderbar-btn btn btn-sm btn-primary">
                        Sm3
                    </button>
                </li>
            </ul>
        </div>
        <button id="opw-wonderbar-carousel" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-toggle-right" title="Insert code for an image slider (carousel)"></i>
        </button>
        <button id="opw-wonderbar-jumbotron" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-square" title="Insert code for a jumbotron"></i>
        </button>
        <button id="opw-wonderbar-label" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-tag" title="Insert code for a label"></i>
        </button>
        <button id="opw-wonderbar-modal" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-external-link-square" title="Insert code for a modal"></i>
        </button>
        <button id="opw-wonderbar-panel" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-calendar-o" title="Insert code for a panel"></i>
        </button>
        <button id="opw-wonderbar-well" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-square-o" title="Insert code for a well"></i>
        </button>
        {{!-- Standard HTML --}}
        <div class="dropdown">
            {{!-- Headings --}}
            <button 
                class="btn btn-primary dropdown-toggle" 
                type="button" 
                id="opw-wonderbar-columns" 
                data-toggle="dropdown" 
                aria-haspopup="true" 
                aria-expanded="true">
                Cols
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu" aria-labelledby="opw-wonderbar-columns">
                <li>
                    <button id="opw-wonderbar-h1" class="opw-wonderbar-btn btn btn-sm btn-primary">
                        <i class="fa fa-header" title="Insert heading"></i>
                    </button>
                </li>
                <li>
                    <button id="opw-wonderbar-h2" class="opw-wonderbar-btn btn btn-sm btn-primary">
                        <i class="fa fa-header" title="Insert heading"></i>
                    </button>
                </li>
                <li>
                    <button id="opw-wonderbar-h3" class="opw-wonderbar-btn btn btn-sm btn-primary">
                        <i class="fa fa-header" title="Insert heading"></i>
                    </button>
                </li>
                <li>
                    <button id="opw-wonderbar-h4" class="opw-wonderbar-btn btn btn-sm btn-primary">
                        <i class="fa fa-header" title="Insert heading"></i>
                    </button>
                </li>
                <li>
                    <button id="opw-wonderbar-h5" class="opw-wonderbar-btn btn btn-sm btn-primary">
                        <i class="fa fa-header" title="Insert heading"></i>
                    </button>
                </li>
                <li>
                    <button id="opw-wonderbar-h6" class="opw-wonderbar-btn btn btn-sm btn-primary">
                        <i class="fa fa-header" title="Insert heading"></i>
                    </button>
                </li>
            </ul>
        </div>
        <button id="opw-wonderbar-dl" class="opw-wonderbar-btn btn btn-sm btn-primary">
            DL
        </button>
        <button id="opw-wonderbar-ol" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-list-ol" title="Insert unordered list"></i>
        </button>
        <button id="opw-wonderbar-ul" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-list-ul" title="Insert unordered list"></i>
        </button>
        <button id="opw-wonderbar-audio" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-music" title="Insert attached audio object"></i>
        </button>
        <button id="opw-wonderbar-image" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-image" title="Insert attached image object"></i>
        </button>
        <button id="opw-wonderbar-video" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-video-camera" title="Insert attached video object"></i>
        </button>
        <button id="opw-wonderbar-code" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-code" title="Insert code block"></i>
        </button>
        <button id="opw-wonderbar-collection" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-magic" title="Insert all the bootstrap components!!"></i>
        </button>
        {{!-- Help --}}
        <button id="opw-wonderbar-help" class="opw-wonderbar-btn btn btn-sm btn-primary">
            <i class="fa fa-question" title="Show OPW help section"></i>
        </button>
    </div>

</template>
